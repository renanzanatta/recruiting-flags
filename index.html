<script>
  const EMOJIS = /ðŸ³ï¸â€ðŸŒˆ|ðŸ³ï¸â€âš§ï¸|âš§ï¸|âœŠ|ðŸ–¤|ðŸ¤Ž/;

  async function search() {
    const q = document.getElementById('q').value.trim();
    const only = document.getElementById('onlyFlags').checked;

    if (!q) return;

    const url = `/api/search?q=${encodeURIComponent(q)}&onlyFlags=${only ? "1" : "0"}`;
    const res = await fetch(url);
    const data = await res.json();

    const list = document.getElementById('results');
    list.innerHTML = '';

    (data.items || [])
      .forEach(i => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="${i.link}" target="_blank">${i.title}</a><br>${i.snippet || ""}`;
        list.appendChild(li);
      });
  }
</script>
